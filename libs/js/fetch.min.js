const http=require("http");class FetchResponse{constructor(e){this.res=e}text(){const e=this;return new Promise((function(t,n){let o,s="";function r(){clearTimeout(o),t(s)}e.res.on("data",(function(e){s+=e})),e.res.on("close",r),o=setTimeout((function(){e.res.removeListener("close",r),n("FetchRequest Timed-Out!")}),5e3)}))}json(){return this.text().then(JSON.parse)}}function fetch(e,t){t||(t={});const n=Object.assign(url.parse(e),t);return new Promise((function(e,o){const s=http.request(n,(function(t){try{e(new FetchResponse(t))}catch(e){o("Could Not Create FetchResponse Object: "+e)}}));s.on("error",(function(e){o("HTTP Error: "+e)})),s.end(t.body)}))}
